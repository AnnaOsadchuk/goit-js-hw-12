{"version":3,"file":"commonHelpers.js","sources":["../src/img/error-icon.png","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEZSURBVHgBrZVRDoMgDIar0fi6m2xH2Y3Ek2w3cFfZXXwBljFQCai0xemfoCaU/xNpKwAirXWrlDY5w8ViPhVmbgwIO14A3zeQKq/2IuwaqOu6A07+zaVUT8iUi+V28rd5NuSIOQs5wxyFUOZKqRtnmIpZQCZz3acWcgcXUjkF0b2bmwFSpAxskMAgYecaWSsFC8AgnHkMqIBR09TCGrnHsZic5iLs3By3ngWsITMgy9yphEyVJZjUM6esHUS9yfea7N7DAmJz/1niM2EhVBZR2UKl8DS/SFO80OhUnCBkoYWgz2MdNAx8q0jFOK/Fy1GQvdqYe50BQc3PgLDmRyCU+aYOfFsoCtPa+yXvp2/ue9rHqLATflCf5QflVUcNIrzeSwAAAABJRU5ErkJggg==\"","export default function createMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item js-item\">\n        \n        <a class=\"gallery-link\" href=\"${largeImageURL}\" >\n          <img class=\"gallery-image\" \n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            width=\"360px\"\n            height=\"200px\"\n          />\n\n          <ul class=\"gallery-item js-gallery\">\n            <label>\n              Likes\n              <li>${likes}</li>\n            </label>\n            <label>\n                Views\n                <li>${views}</li>\n             </label>\n            <label>\n              Comments\n              <li>${comments}</li>\n              </label>\n            <label>\n              Downloads\n              <li>${downloads}</li>\n            </label>\n          </ul>\n         </a>       \n      </li>`\n    )\n    .join('');\n}\n","import axios from 'axios';\n\nexport default async function searchPixa(searchQuery, page = 1) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '36683727-e929c153efd1b0d2cc7c4f38c';\n  const QUERY = `${searchQuery}`;\n  const IMAGE_TYPE = 'photo';\n  const ORIENTATION = 'horizontal';\n  const SEFESEARCH = 'true';\n  const PAGE = `${page}`;\n  const PER_PAGE = 15;\n  const link = `${BASE_URL}?key=${API_KEY}&q=${QUERY}&image_type=${IMAGE_TYPE}&orientastion=${ORIENTATION}&seferearch=${SEFESEARCH}&page=${PAGE}&per_page=${PER_PAGE}`;\n\n  try {\n    const { data } = await axios.get(link);\n    const isNextPage = PAGE * PER_PAGE < data.totalHits ? true : false;\n\n    if (data.hits.length === 0) {\n      throw 'Sorry, there are no images matching your search query. Please try again!';\n    }\n\n    return [data.hits, isNextPage];\n  } catch (error) {\n    throw new Error(error);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Error_png from './img/error-icon.png';\n\nimport createMarkup from './js/render-functions';\nimport searchPixa from './js/pixabay-api';\n\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('.input-search');\nconst formEl = document.querySelector('.js-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBnt = document.querySelector('.js-load-button');\n\nformEl.addEventListener('submit', onSubmit);\nloadMoreBnt.addEventListener('click', onLoad);\n\nhideElement(loader);\nhideElement(loadMoreBnt);\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet searchQuery;\n\nfunction onLoad(event) {\n  event.preventDefault();\n  showElement(loader);\n  currentPage += 1;\n  searchPixa(searchQuery, currentPage)\n    .then(([images, isNextPage]) => {\n      const markup = createMarkup(images);\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n      scroll();\n      hideElement(loader);\n      if (!isNextPage) {\n        hideElement(loadMoreBnt);\n        const messageLoad =\n          'We are sorry, but you have reached the end of search results';\n        iziToast.show({\n          titleColor: '#FFFFFF',\n          titleSize: '16px',\n          messageSize: '16px',\n          messageColor: '#FFFFFF',\n          backgroundColor: '#799CD2',\n          message: `${messageLoad}`,\n          position: 'bottomLeft',\n          timeout: 3000,\n        });\n      }\n    })\n    .catch(message => {\n      iziToast.show({\n        titleColor: '#FFFFFF',\n        titleSize: '16px',\n        messageSize: '16px',\n        messageColor: '#FFFFFF',\n        backgroundColor: '#799CD2',\n        message: `${message}`,\n        position: 'bottomLeft',\n        timeout: 3000,\n      });\n      hideElement(loader);\n      hideElement(loadMoreBnt);\n    });\n}\n\nfunction onSubmit(event) {\n  resetCurrent();\n  event.preventDefault();\n  searchQuery = input.value;\n  showElement(loader);\n  hideElement(loadMoreBnt);\n  searchPixa(searchQuery)\n    .then(([images, isNextPage]) => {\n      const markup = createMarkup(images);\n      gallery.innerHTML = '';\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n      if (isNextPage) {\n        showElement(loadMoreBnt);\n      }\n      scroll();\n      hideElement(loader);\n    })\n    .catch(message => {\n      gallery.innerHTML = '';\n      iziToast.error({\n        titleColor: '#FFFFFF',\n        titleSize: '16px',\n        messageSize: '16px',\n        messageColor: '#FFFFFF',\n        backgroundColor: '#B51B1B',\n        message: `${message}`,\n        position: 'topRight',\n        timeout: 3000,\n        iconUrl: Error_png,\n      });\n      hideElement(loader);\n      hideElement(loadMoreBnt);\n    });\n}\n\nfunction scroll() {\n  const galleryItems = document.querySelectorAll('.js-item');\n  const rect = galleryItems.item(0).getBoundingClientRect();\n  window.scrollBy({ top: rect.height * 2, behavior: 'smooth' });\n}\n\nfunction showElement(element) {\n  element.classList.remove('hidden');\n}\n\nfunction hideElement(element) {\n  element.classList.add('hidden');\n}\n\nfunction resetCurrent() {\n  currentPage = 1;\n}\n"],"names":["Error_png","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchPixa","searchQuery","page","BASE_URL","API_KEY","QUERY","IMAGE_TYPE","ORIENTATION","SEFESEARCH","PAGE","PER_PAGE","link","data","axios","isNextPage","error","gallery","input","formEl","loader","loadMoreBnt","onSubmit","onLoad","hideElement","lightbox","SimpleLightbox","currentPage","event","showElement","markup","scroll","messageLoad","iziToast","message","resetCurrent","rect","element"],"mappings":"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"}